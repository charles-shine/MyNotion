# 索引与视图

## 索引

### 索引概述

数据库中的索引是一个表中所包含的值的列表，其中注明了表中包含的某列（或某些列）的值以及**各个值对应的记录存储位置**，可以为表中单列或一组列建议索引。

索引的作用：

1. 大大加快数据检索速度。
2. 加速表与表之间的连接。
3. 显著减少查询中分组和排序的时间。

> 索引并不是越多越好，一般建议不超过6个为主。
>
> 索引存在以下不足：
>
> - 创建索引需要花费时间和存储空间。
>
> - 当数据变化时，需要重新维护索引。

索引的分类：

- 聚集索引（clustered index）：**表中各行物理顺序与索引键值的逻辑（索引）顺序相同**；**每个表仅能有一个聚集索引**；一般创建有大量唯一值且不常更新的列（一般为主键）；对搜索范围值特别有效。
- 非聚集索引（nonclustered index）：**结构独立于数据行，两者顺序没有相关性**；**每张表最多有249个非聚集索引**；常用于：1.在join、where及group by子句上出现的列；2.常常更新值的列；3.外键对应的列。

聚集索引工作步骤：

![4kjSy.png](https://s1.328888.xyz/2022/05/09/4kjSy.png)

非聚集索引工作步骤：

![4k6ik.png](https://s1.328888.xyz/2022/05/09/4k6ik.png)

索引的特性：

1. 索引增强了连接表、排序、分组的查询。
2. 当修改了创建索引的列，相应的索引也会自动更新。
3. 不常用的索引不应创建。
4. 聚集索引通常建立在非聚集索引之前。
5. 通常**外键上创建非聚集索引，主键上创建聚集索引**。

### 创建索引

~~~sql
create [unique][clustered|nonclustered]index 索引名
on {表名|视图名}{列名[ASC|DESC][,...n]}
~~~

> unique 指定创建唯一索引，创建、更新或插入时会检查是否有重复值，存在重复值则返回错误信息和第一个重复的值

*聚集索引名以idx打头，非聚集索引名以nidx打头*。

### 维护索引



